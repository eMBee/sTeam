#!/usr/local/pike/7.8.866/bin/pike

void help()
{
    write("NAME\n");
    write("\tsteam command is used to run steam tools\n");
    write("SYNOPSIS\n");
    write("\tsteam <tool> [arguments]\n");
    write("DESCRIPTION\n");
    write("\ttools available: \n");
    write("\tshell: steam shell\n");
    write("\tdebug: steam debug\n");
    write("\tedit: steam edit <filename1> [filename2,..]\n");
}

void resolveParam(int argc,array(string) argv)
{
    if(argv[1]=="shell")
    {
        array command =({"/usr/local/lib/steam/tools/steam-shell.pike"});
        object shell = Process.create_process(command,(["stdin":Stdio.stdin,"stdout":Stdio.stdout,"stderr":Stdio.stderr]));
        shell->wait();
    }
    else if (argv[1]=="debug")
    {
        array command = ({"/usr/local/lib/steam/tools/debug.pike"});
        object shell = Process.create_process(command,(["stdin":Stdio.stdin,"stdout":Stdio.stdout,"stderr":Stdio.stderr]));
        shell->wait();
    }
    else if(argv[1]=="edit")
    {
        array command = ({"/usr/local/lib/steam/tools/edit.pike"})+argv[2..];
        object shell = Process.create_process(command,(["stdin":Stdio.stdin,"stdout":Stdio.stdout,"stderr":Stdio.stderr]));
        shell->wait();
    }
    else if(argv[1]=="import-from-git")
    {
        array command = ({"/usr/local/lib/steam/tools/import-from-git.pike"})+argv[2..];
        object shell = Process.create_process(command,(["stdin":Stdio.stdin,"stdout":Stdio.stdout,"stderr":Stdio.stderr]));
        shell->wait();
    }
    else if(argv[1]=="export-from-git")
    {
        array command = ({"/usr/local/lib/steam/tools/export-to-git.pike"})+argv[2..];
        object shell = Process.create_process(command,(["stdin":Stdio.stdin,"stdout":Stdio.stdout,"stderr":Stdio.stderr]));
        shell->wait();
    }
    else
    {
        //print help
        help();
    }
}

int main(int argc,array(string) argv)
{
    if(argc==1) help();//print help
    else resolveParam(argc,argv);
    return 0;
}

