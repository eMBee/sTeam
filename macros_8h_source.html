<HTML>
<HEAD>
<TITLE>sTeam function reference</TITLE>
<LINK HREF="doxygen.css" REL="stylesheet" TYPE="text/css">
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<IMG src="images/kopfleiste_big.jpg"/>
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_41e1742e44e2de38b3bc91f993fed282.html">server</a></li><li class="navelem"><a class="el" href="dir_2b32f7736d6a65027d17676f6279053c.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">macros.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="macros_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (C) 2000-2004  Thomas Bopp, Thorsten Hampel, Ludger Merkens</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  This program is free software; you can redistribute it and/or modify</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  the Free Software Foundation; either version 2 of the License, or</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  (at your option) any later version.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *  This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *  GNU General Public License for more details.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *  You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> *  along with this program; if not, write to the Free Software</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * </span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * $Id: macros.h,v 1.2 2010/01/25 18:50:10 astra Exp $</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef _MACROS_H</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define _MACROS_H</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="exception_8h.html">exception.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="config_8h.html">config.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="macros_8h.html#abb452686968e48b67397da5f97445f5b">   27</a></span>&#160;<span class="preprocessor">#define bool int</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="macros_8h.html#a41f9c5fb8b08eb5dc3edce4dcb37fee7">   28</a></span>&#160;<span class="preprocessor">#define true  1</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="macros_8h.html#a65e9886d74aaee76545e83dd09011727">   29</a></span>&#160;<span class="preprocessor">#define false 0</span></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="macros_8h.html#ac97b8ee753e4405397a42ad5799b0f9e">   30</a></span>&#160;<span class="preprocessor">#define null  0</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="macros_8h.html#a286f46d8c8c8ed09f682e62eddb8712f">   32</a></span>&#160;<span class="preprocessor">#define PROXY(o) (o-&gt;this)</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="macros_8h.html#a60907e3df13e5c5eaee6031ee67c6184">   33</a></span>&#160;<span class="preprocessor">#define MIN(i,j) (i &lt; j ? i : j)</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#if !constant(steamtools.get_caller) </span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="macros_8h.html#a7bf83495c4c1a47e4b5711455b0e29a4">   35</a></span>&#160;<span class="preprocessor">#define CALLER Caller.get_caller(this_object(), backtrace())</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#define CALLER steamtools.get_caller(this_object())</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="macros_8h.html#a781072b8fbaed784a2e4b7cbaf41696d">   39</a></span>&#160;<span class="preprocessor">#define MCALLER (CALLER == master() ? PREVCALLER : CALLER)</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="macros_8h.html#ad040302efad86818456d4ea63b48d703">   41</a></span>&#160;<span class="preprocessor">#define PREVCALLER function_object(backtrace()[-3][2])</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="macros_8h.html#a4b83ac73ed694a8d351ab9c7b1811339">   43</a></span>&#160;<span class="preprocessor">#define CALLINGFUNCTION function_name(backtrace()[-2][2])</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="macros_8h.html#a53d46a62beba3bf9df05fe1cf6fde76b">   45</a></span>&#160;<span class="preprocessor">#define CALLERCLASS backtrace()[-2][0]</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="macros_8h.html#a01cb33ce410af881c34361f188bd5133">   47</a></span>&#160;<span class="preprocessor">#define CALLERPROGRAM object_program(function_object(backtrace()[-2][2]))</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="macros_8h.html#ae11d16fadb03997e1b153bf9478842a6">   49</a></span>&#160;<span class="preprocessor">#define MESSAGE(s, args...) write(&quot;[&quot;+Calendar.Second(time())-&gt;format_time()+&quot;] &quot;+s+&quot;\n&quot;, args)</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="macros_8h.html#a599d727c1341f7b8f4d118e0cd883a9c">   50</a></span>&#160;<span class="preprocessor">#define MESSAGE_START(s, args...) write(&quot;[&quot;+Calendar.Second(time())-&gt;format_time()+&quot;] &quot;+s, args)</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="macros_8h.html#a66ac95568bb0eb26a3b59748f861c839">   51</a></span>&#160;<span class="preprocessor">#define MESSAGE_APPEND(s, args...) write(s, args)</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="macros_8h.html#a65d6742d4f3ac45f1f35798d66f7e46a">   52</a></span>&#160;<span class="preprocessor">#define MESSAGE_END(s, args...) write(s+&quot;\n&quot;, args)</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="macros_8h.html#a59f417ad57ac62c283438fa5ef61b085">   54</a></span>&#160;<span class="preprocessor">#define WARN(s, args...) werror(s+&quot;\n&quot;, args)</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#define LOG(s) werror(s+&quot;\n&quot;)</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="macros_8h.html#a570713ca4a493fc4d2130a405f3b87ea">   59</a></span>&#160;<span class="preprocessor">#define LOG(s)</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="macros_8h.html#aa8fc2721b0b2a456b2c9c31215ba16e7">   62</a></span>&#160;<span class="preprocessor">#define FATAL(s, args...) werror(&quot;-------------------------------\n&quot;+ctime(time())+s+&quot;\n&quot;, args)</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="macros_8h.html#a0a80e260ccd570da19bbe52e39e8a546">   64</a></span>&#160;<span class="preprocessor">#define _LOG(s) werror(&quot;(&quot;+this_object()-&gt;get_object_id()+&quot;) &quot;+s+&quot;\n&quot;)</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#define TRACE(s) werror(&quot;[&quot;+master()-&gt;stupid_describe(this_object())+&quot;]&quot;+s+&quot;\n&quot;)</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="macros_8h.html#a1fd53f2c857d3d8789999d9b61879c8e">   69</a></span>&#160;<span class="preprocessor">#define TRACE(s) </span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="macros_8h.html#ae9c8ad303699fd93507abab6faf0575c">   72</a></span>&#160;<span class="preprocessor">#define LOG_DB(s) catch {_Server-&gt;get_module(&quot;log&quot;)-&gt;log_text(&quot;database&quot;,s); }</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">//#define LOG_DB</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//#define LOG_DB(s) werror(&quot;DB:&quot;+s+&quot;\n&quot;)</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#ifdef DEBUG_SECURITY</span></div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="macros_8h.html#a38f213d0ec0ab1d54de2448771a72562">   78</a></span>&#160;<span class="preprocessor">#define SECURITY_LOG(s, args...) if (1) {if (_Server-&gt;get_module(&quot;log&quot;)) _Server-&gt;get_module(&quot;log&quot;)-&gt;log_security(s, args);}</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#define SECURITY_LOG(s, args...)</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="macros_8h.html#ab53f5475fcd2162a4609651b5ae680d5">   83</a></span>&#160;<span class="preprocessor">#define LOG_BOOT(s) catch { _LOG-&gt;log_boot(s); }</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="macros_8h.html#a65dc2d384160d805f39304dadedb8c9b">   85</a></span>&#160;<span class="preprocessor">#define LOG_EVENT(s) catch{_LOG-&gt;log_event(s);}</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="macros_8h.html#ac45b8ae2298914fc522b2a421840952c">   87</a></span>&#160;<span class="preprocessor">#define LOG_ERR(s) catch{_LOG-&gt;log_error(s);}</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="macros_8h.html#a79b566624ad59981eb413691e65eed66">   89</a></span>&#160;<span class="preprocessor">#define LOG_DEBUG(s) catch{_Server-&gt;get_module(&quot;log&quot;)-&gt;log_debug(s);}</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="macros_8h.html#ae1e756653e3dface7f78c3909ba7d6c9">   90</a></span>&#160;<span class="preprocessor">#define PRINT_BT(c) (&quot;Error: &quot; + c[0] + &quot;\n&quot; + master()-&gt;describe_backtrace(c[1]))</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="macros_8h.html#aa37e6385222bcb38d9ebdab1b36eae61">   92</a></span>&#160;<span class="preprocessor">#define THROW(c, e) throw( ({ c, backtrace(), e}))</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="macros_8h.html#a885c021551e82c5556418b7f8ffb4c71">   93</a></span>&#160;<span class="preprocessor">#define IS_SOCKET(o) (master()-&gt;is_socket(o))</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="macros_8h.html#a263efce0e5cda1d387a1a43f94715445">   95</a></span>&#160;<span class="preprocessor">#define NIL (([])[&quot;&quot;])</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="macros_8h.html#ab9f6a5b9ca3b20f1b960eddb807105b1">   97</a></span>&#160;<span class="preprocessor">#define CONTENTOF(x) _FILEPATH-&gt;path_to_object(x)-&gt;get_content()</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="macros_8h.html#a4fa28a492427bc4af75248e22537e9b4">   99</a></span>&#160;<span class="preprocessor">#define T_INT     &quot;int&quot;</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="macros_8h.html#a22a8c2a4bbaae9b68f65c9bb92fd4e39">  100</a></span>&#160;<span class="preprocessor">#define T_STRING  &quot;string&quot;</span></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="macros_8h.html#a3d072e0c25cf678e9b8601b957b92eae">  101</a></span>&#160;<span class="preprocessor">#define T_FLOAT   &quot;float&quot;</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="macros_8h.html#abed71c72d5c3083041d52ad25630270e">  102</a></span>&#160;<span class="preprocessor">#define T_OBJECT  &quot;object&quot;</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="macros_8h.html#a7dde9c19be5b2390017827b490c4ac94">  103</a></span>&#160;<span class="preprocessor">#define T_MAPPING &quot;mapping&quot;</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="macros_8h.html#abbd332f6f94d77e0a369c7720128639e">  104</a></span>&#160;<span class="preprocessor">#define T_ARRAY   &quot;array&quot;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="macros_8h.html#a89856851db583091873b3cd8489cb8b0">  108</a></span>&#160;<span class="preprocessor">#define IS_PROXY(o) (object_program(o) == (program)&quot;/kernel/proxy.pike&quot; || object_program(o) == (program)&quot;/kernel/proxy&quot;)</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="macros_8h.html#a268be70ca1a35e16620c52309d1120ec">  110</a></span>&#160;<span class="preprocessor">#define URLTYPE_FS       0</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="macros_8h.html#a588844cd23c6bbd4ae78ee950e960209">  111</a></span>&#160;<span class="preprocessor">#define URLTYPE_DB       1</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="macros_8h.html#abbb2b046656762b0e70164ab422ade6d">  112</a></span>&#160;<span class="preprocessor">#define URLTYPE_HTTP     2</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="macros_8h.html#a031228db4ac514432765eb8ec7b57d58">  113</a></span>&#160;<span class="preprocessor">#define URLTYPE_RELOC    3</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="macros_8h.html#a3053e28e244cfb7dbc74980ad19dc8b6">  114</a></span>&#160;<span class="preprocessor">#define URLTYPE_DBO      4</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="macros_8h.html#a8ea31789039856531709c53cad252a42">  115</a></span>&#160;<span class="preprocessor">#define URLTYPE_DBFT     5</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="macros_8h.html#a4171fb486b94b2ea82d27083da79c04a">  117</a></span>&#160;<span class="preprocessor">#define MAX_BUFLEN       65504    </span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="preprocessor">#endif</span></div><div class="ttc" id="config_8h_html"><div class="ttname"><a href="config_8h.html">config.h</a></div></div>
<div class="ttc" id="exception_8h_html"><div class="ttname"><a href="exception_8h.html">exception.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
